"use strict";(self.webpackChunktools_app_webpack=self.webpackChunktools_app_webpack||[]).push([[371],{870:(e,a,l)=>{var t=l(3751),n=l(8848),o=(l(8134),l(5620),l(7710)),u=(l(2120),l(7879)),d=(l(3474),l(2986)),r=(l(4029),l(566)),s=(l(4576),l(3938)),c=(l(5455),l(1627),l(2905),l(4708),l(641)),i=l(33),p=l(953),k=l(5718);const b={class:"smart-review-container"},f={key:0,class:"result-area"},m={class:"review-content"},h={class:"copy-btn"},_={__name:"smart-review",setup(e){const a=(0,p.KR)(!1),l=(0,p.KR)(""),t=(0,p.Kh)({inputType:"link",productLink:"",productName:"",features:"",rating:"5",tone:"normal"}),_=async()=>{if("link"===t.inputType&&!t.productLink)return void k.nk.warning("请输入商品链接");if("manual"===t.inputType&&!t.productName)return void k.nk.warning("请输入商品名称");a.value=!0;let e={};if("link"===t.inputType){const a=await fetch("http://192.168.31.189/:3000/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t.productLink})}).then(e=>e.json()).catch(()=>null);a&&a.data&&(e=a.data)}else e={title:t.productName,features:t.features};const n=(await fetch("http://192.168.31.189/:3000/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productInfo:e,rating:t.rating,tone:t.tone})})).body.getReader(),o=new TextDecoder("utf-8");let u="",d="";for(;;){const{value:e,done:a}=await n.read();if(a)break;d+=o.decode(e,{stream:!0});const t=d.split("\n");d=t.pop()||"";for(const e of t){const a=e.trim();if(!a.startsWith("data: "))continue;const t=a.replace(/^data: /,"");if("[DONE]"!==t)try{const e=JSON.parse(t);e.content&&(u+=e.content,l.value=u)}catch(e){}}}a.value=!1},v=()=>{t.inputType="link",t.productLink="",t.productName="",t.features="",t.rating="5",t.tone="normal",l.value=""},y=()=>{l.value&&navigator.clipboard.writeText(l.value).then(()=>{k.nk.success("复制成功")}).catch(()=>{k.nk.error("复制失败")})},F=(0,p.KR)(""),w=(0,p.KR)(""),V=async()=>{try{const e=await fetch("http://localhost:3000/send-code",{method:"POST",credentials:"include"}),a=await e.json();a.ok?(k.nk.success(a.msg||"JD登录成功"),a.sessionId&&(w.value=a.sessionId)):k.nk.error(a.error||"JD登录失败")}catch(e){k.nk.error("JD登录请求失败")}},g=async()=>{if(w.value)try{const e=await fetch("http://192.168.31.189/:3000/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:F.value,sessionId:w.value})}),a=await e.json();a.ok?k.nk.success(a.msg||"验证码提交成功"):k.nk.error(a.error||"验证码提交失败")}catch(e){k.nk.error("验证码提交请求失败")}else k.nk.warning("请先点击登录获取会话ID")};return(e,p)=>{const k=d.Zh,w=d.MQ,W=o.xE,T=s.WK,C=r.fR,N=d.ll,O=u.S2,L=o.US,S=n.Ik;return(0,c.uX)(),(0,c.CE)("div",b,[(0,c.bF)(S,{class:"box-card"},{header:(0,c.k6)(()=>[...p[7]||(p[7]=[(0,c.Lk)("div",{class:"card-header"},[(0,c.Lk)("span",null,"智能商品评价生成器")],-1)])]),default:(0,c.k6)(()=>[(0,c.bF)(L,{model:t,"label-width":"120px"},{default:(0,c.k6)(()=>[(0,c.bF)(W,{label:"输入方式"},{default:(0,c.k6)(()=>[(0,c.bF)(w,{modelValue:t.inputType,"onUpdate:modelValue":p[0]||(p[0]=e=>t.inputType=e)},{default:(0,c.k6)(()=>[(0,c.bF)(k,{label:"link"},{default:(0,c.k6)(()=>[...p[8]||(p[8]=[(0,c.eW)("链接解析",-1)])]),_:1}),(0,c.bF)(k,{label:"manual"},{default:(0,c.k6)(()=>[...p[9]||(p[9]=[(0,c.eW)("手动输入",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),"link"===t.inputType?((0,c.uX)(),(0,c.Wv)(W,{key:0,label:"商品链接"},{default:(0,c.k6)(()=>[(0,c.bF)(T,{modelValue:t.productLink,"onUpdate:modelValue":p[1]||(p[1]=e=>t.productLink=e),placeholder:"请粘贴商品详情页链接 (京东/淘宝/天猫)",clearable:""},null,8,["modelValue"])]),_:1})):((0,c.uX)(),(0,c.CE)(c.FK,{key:1},[(0,c.bF)(W,{label:"商品名称"},{default:(0,c.k6)(()=>[(0,c.bF)(T,{modelValue:t.productName,"onUpdate:modelValue":p[2]||(p[2]=e=>t.productName=e),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),(0,c.bF)(W,{label:"商品特点"},{default:(0,c.k6)(()=>[(0,c.bF)(T,{modelValue:t.features,"onUpdate:modelValue":p[3]||(p[3]=e=>t.features=e),type:"textarea",rows:3,placeholder:"请输入商品特点，例如：外观时尚、性价比高、物流快"},null,8,["modelValue"])]),_:1})],64)),(0,c.bF)(C,{"content-position":"left"},{default:(0,c.k6)(()=>[...p[10]||(p[10]=[(0,c.eW)("评价设置",-1)])]),_:1}),(0,c.bF)(W,{label:"评价分值"},{default:(0,c.k6)(()=>[(0,c.bF)(w,{modelValue:t.rating,"onUpdate:modelValue":p[4]||(p[4]=e=>t.rating=e)},{default:(0,c.k6)(()=>[(0,c.bF)(N,{label:"5"},{default:(0,c.k6)(()=>[...p[11]||(p[11]=[(0,c.eW)("好评 (5星)",-1)])]),_:1}),(0,c.bF)(N,{label:"3"},{default:(0,c.k6)(()=>[...p[12]||(p[12]=[(0,c.eW)("中评 (3星)",-1)])]),_:1}),(0,c.bF)(N,{label:"1"},{default:(0,c.k6)(()=>[...p[13]||(p[13]=[(0,c.eW)("差评 (1星)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,c.bF)(W,{label:"评价风格"},{default:(0,c.k6)(()=>[(0,c.bF)(w,{modelValue:t.tone,"onUpdate:modelValue":p[5]||(p[5]=e=>t.tone=e)},{default:(0,c.k6)(()=>[(0,c.bF)(N,{label:"normal"},{default:(0,c.k6)(()=>[...p[14]||(p[14]=[(0,c.eW)("标准",-1)])]),_:1}),(0,c.bF)(N,{label:"humorous"},{default:(0,c.k6)(()=>[...p[15]||(p[15]=[(0,c.eW)("幽默",-1)])]),_:1}),(0,c.bF)(N,{label:"serious"},{default:(0,c.k6)(()=>[...p[16]||(p[16]=[(0,c.eW)("严肃",-1)])]),_:1}),(0,c.bF)(N,{label:"literary"},{default:(0,c.k6)(()=>[...p[17]||(p[17]=[(0,c.eW)("文艺",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,c.bF)(W,null,{default:(0,c.k6)(()=>[(0,c.bF)(O,{type:"primary",loading:a.value,onClick:_},{default:(0,c.k6)(()=>[...p[18]||(p[18]=[(0,c.eW)("生成评价",-1)])]),_:1},8,["loading"]),(0,c.bF)(O,{onClick:v},{default:(0,c.k6)(()=>[...p[19]||(p[19]=[(0,c.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),l.value?((0,c.uX)(),(0,c.CE)("div",f,[(0,c.bF)(C,{"content-position":"left"},{default:(0,c.k6)(()=>[...p[20]||(p[20]=[(0,c.eW)("生成结果",-1)])]),_:1}),(0,c.Lk)("div",m,(0,i.v_)(l.value),1),(0,c.Lk)("div",h,[(0,c.bF)(O,{type:"success",link:"",onClick:y},{default:(0,c.k6)(()=>[...p[21]||(p[21]=[(0,c.eW)("复制评价",-1)])]),_:1})])])):(0,c.Q3)("",!0)]),_:1}),(0,c.bF)(T,{modelValue:F.value,"onUpdate:modelValue":p[6]||(p[6]=e=>F.value=e),placeholder:"请输入短信验证码"},null,8,["modelValue"]),(0,c.bF)(O,{onClick:V},{default:(0,c.k6)(()=>[...p[22]||(p[22]=[(0,c.eW)("登录JD测试",-1)])]),_:1}),(0,c.bF)(O,{onClick:g},{default:(0,c.k6)(()=>[...p[23]||(p[23]=[(0,c.eW)("提交验证码",-1)])]),_:1})])}}};const v=(0,l(6262).A)(_,[["__scopeId","data-v-c8d47e96"]]);(0,t.Ef)(v).mount("#app")}},e=>{e.O(0,[288,710,96,869],()=>{return a=870,e(e.s=a);var a});e.O()}]);