"use strict";(self.webpackChunktools_app_webpack=self.webpackChunktools_app_webpack||[]).push([[371],{870:(e,a,t)=>{var l=t(3751),n=t(8848),o=(t(8134),t(5620),t(7710)),u=(t(2120),t(7879)),d=(t(3474),t(2986)),r=(t(4029),t(566)),i=(t(4576),t(9771)),p=(t(5455),t(1627),t(2905),t(4708),t(641)),c=t(33),s=t(953),k=t(5214);const b={class:"smart-review-container"},f={key:0,class:"result-area"},m={class:"review-content"},_={class:"copy-btn"},F={__name:"smart-review",setup(e){const a=(0,s.KR)(!1),t=(0,s.KR)(""),l=(0,s.Kh)({inputType:"link",productLink:"",productName:"",features:"",rating:"5",tone:"normal"}),F={productLink:[{required:"link"===l.inputType,message:"请输入商品链接",trigger:"blur"}]},y=async()=>{if("link"===l.inputType&&!l.productLink)return void k.nk.warning("请输入商品链接");if("manual"===l.inputType&&!l.productName)return void k.nk.warning("请输入商品名称");a.value=!0;let e={};if("link"===l.inputType)try{const a=await fetch("http://192.168.31.189:3000/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:l.productLink})}),t=await a.json();t&&t.data&&(e=t.data)}catch(e){}else e={title:l.productName,features:l.features};const n=(await fetch("http://192.168.31.189:3000/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productInfo:e,rating:l.rating,tone:l.tone})})).body.getReader(),o=new TextDecoder("utf-8");let u="",d="";for(;;){const{value:e,done:a}=await n.read();if(a)break;d+=o.decode(e,{stream:!0});const l=d.split("\n");d=l.pop()||"";for(const e of l){const a=e.trim();if(!a.startsWith("data: "))continue;const l=a.replace(/^data: /,"");if("[DONE]"!==l)try{const e=JSON.parse(l);e.content&&(u+=e.content,t.value=u)}catch(e){}}}a.value=!1},v=()=>{l.inputType="link",l.productLink="",l.productName="",l.features="",l.rating="5",l.tone="normal",t.value=""},h=()=>{t.value&&navigator.clipboard.writeText(t.value).then(()=>{k.nk.success("复制成功")}).catch(()=>{k.nk.error("复制失败")})};return(e,s)=>{const k=d.Zh,w=d.MQ,V=o.xE,g=i.WK,W=r.fR,T=d.ll,L=u.S2,C=o.US,N=n.Ik;return(0,p.uX)(),(0,p.CE)("div",b,[(0,p.bF)(N,{class:"box-card"},{header:(0,p.k6)(()=>[...s[6]||(s[6]=[(0,p.Lk)("div",{class:"card-header"},[(0,p.Lk)("span",null,"智能商品评价生成器")],-1)])]),default:(0,p.k6)(()=>[(0,p.bF)(C,{model:l,"label-width":"120px",rules:F},{default:(0,p.k6)(()=>[(0,p.bF)(V,{label:"输入方式"},{default:(0,p.k6)(()=>[(0,p.bF)(w,{modelValue:l.inputType,"onUpdate:modelValue":s[0]||(s[0]=e=>l.inputType=e)},{default:(0,p.k6)(()=>[(0,p.bF)(k,{label:"manual"},{default:(0,p.k6)(()=>[...s[7]||(s[7]=[(0,p.eW)("手动输入",-1)])]),_:1}),(0,p.bF)(k,{label:"link"},{default:(0,p.k6)(()=>[...s[8]||(s[8]=[(0,p.eW)("链接解析",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),"link"===l.inputType?((0,p.uX)(),(0,p.Wv)(V,{key:0,label:"商品链接",prop:"productLink"},{default:(0,p.k6)(()=>[(0,p.bF)(g,{modelValue:l.productLink,"onUpdate:modelValue":s[1]||(s[1]=e=>l.productLink=e),placeholder:"请粘贴商品详情页链接 (京东/淘宝/天猫)",clearable:""},null,8,["modelValue"])]),_:1})):((0,p.uX)(),(0,p.CE)(p.FK,{key:1},[(0,p.bF)(V,{label:"商品名称"},{default:(0,p.k6)(()=>[(0,p.bF)(g,{modelValue:l.productName,"onUpdate:modelValue":s[2]||(s[2]=e=>l.productName=e),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),(0,p.bF)(V,{label:"商品特点"},{default:(0,p.k6)(()=>[(0,p.bF)(g,{modelValue:l.features,"onUpdate:modelValue":s[3]||(s[3]=e=>l.features=e),type:"textarea",rows:3,placeholder:"请输入商品特点，例如：外观时尚、性价比高、物流快"},null,8,["modelValue"])]),_:1})],64)),(0,p.bF)(W,{"content-position":"left"},{default:(0,p.k6)(()=>[...s[9]||(s[9]=[(0,p.eW)("评价设置",-1)])]),_:1}),(0,p.bF)(V,{label:"评价分值"},{default:(0,p.k6)(()=>[(0,p.bF)(w,{modelValue:l.rating,"onUpdate:modelValue":s[4]||(s[4]=e=>l.rating=e)},{default:(0,p.k6)(()=>[(0,p.bF)(T,{label:"5"},{default:(0,p.k6)(()=>[...s[10]||(s[10]=[(0,p.eW)("好评 (5星)",-1)])]),_:1}),(0,p.bF)(T,{label:"3"},{default:(0,p.k6)(()=>[...s[11]||(s[11]=[(0,p.eW)("中评 (3星)",-1)])]),_:1}),(0,p.bF)(T,{label:"1"},{default:(0,p.k6)(()=>[...s[12]||(s[12]=[(0,p.eW)("差评 (1星)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,p.bF)(V,{label:"评价风格"},{default:(0,p.k6)(()=>[(0,p.bF)(w,{modelValue:l.tone,"onUpdate:modelValue":s[5]||(s[5]=e=>l.tone=e)},{default:(0,p.k6)(()=>[(0,p.bF)(T,{label:"normal"},{default:(0,p.k6)(()=>[...s[13]||(s[13]=[(0,p.eW)("标准",-1)])]),_:1}),(0,p.bF)(T,{label:"humorous"},{default:(0,p.k6)(()=>[...s[14]||(s[14]=[(0,p.eW)("幽默",-1)])]),_:1}),(0,p.bF)(T,{label:"serious"},{default:(0,p.k6)(()=>[...s[15]||(s[15]=[(0,p.eW)("严肃",-1)])]),_:1}),(0,p.bF)(T,{label:"literary"},{default:(0,p.k6)(()=>[...s[16]||(s[16]=[(0,p.eW)("文艺",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,p.bF)(V,null,{default:(0,p.k6)(()=>[(0,p.bF)(L,{type:"primary",loading:a.value,onClick:y},{default:(0,p.k6)(()=>[...s[17]||(s[17]=[(0,p.eW)("生成评价",-1)])]),_:1},8,["loading"]),(0,p.bF)(L,{onClick:v},{default:(0,p.k6)(()=>[...s[18]||(s[18]=[(0,p.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),t.value?((0,p.uX)(),(0,p.CE)("div",f,[(0,p.bF)(W,{"content-position":"left"},{default:(0,p.k6)(()=>[...s[19]||(s[19]=[(0,p.eW)("生成结果",-1)])]),_:1}),(0,p.Lk)("div",m,(0,c.v_)(t.value),1),(0,p.Lk)("div",_,[(0,p.bF)(L,{type:"success",link:"",onClick:h},{default:(0,p.k6)(()=>[...s[20]||(s[20]=[(0,p.eW)("复制评价",-1)])]),_:1})])])):(0,p.Q3)("",!0)]),_:1})])}}};const y=(0,t(6262).A)(F,[["__scopeId","data-v-6ccfbcd8"]]);(0,l.Ef)(y).mount("#app")}},e=>{e.O(0,[288,710,96,869],()=>{return a=870,e(e.s=a);var a});e.O()}]);